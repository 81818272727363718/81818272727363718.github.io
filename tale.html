<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Plants vs Zombies HD Clone</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: linear-gradient(180deg, #194d19 0%, #0a1e0a 100%);
    font-family: "Poppins", sans-serif;
    color: #fff;
    overflow: hidden;
  }

  #game-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px;
    height: 100vh;
  }

  h1 {
    font-size: 2em;
    text-shadow: 0 0 10px #00ff8f;
    margin-bottom: 10px;
  }

  #top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 90%;
    margin-bottom: 8px;
    font-size: 1.2em;
  }

  #sun-counter {
    background: rgba(255,255,255,0.15);
    padding: 8px 16px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.25);
  }

  #status-text {
    opacity: 0.85;
    text-align: center;
  }

  #start-button {
    background: linear-gradient(90deg,#44ff88,#00ffaa);
    border: none;
    border-radius: 12px;
    color: #021;
    padding: 8px 18px;
    font-weight: 600;
    cursor: pointer;
  }

  #seed-bank {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .seed-card {
    width: 120px;
    height: 70px;
    background: linear-gradient(145deg,#f8f2b0,#c7a945);
    border: 3px solid #7a6120;
    border-radius: 10px;
    text-align: center;
    padding: 6px;
    cursor: pointer;
    color: #3a2a00;
    transition: transform 0.15s;
    font-weight: 600;
  }
  .seed-card.selected {
    border-color: #00ff90;
    transform: scale(1.05);
  }

  #board {
    position: relative;
    width: 990px;
    height: 550px;
    background: repeating-linear-gradient(
      to right, #2f8a2f 0, #2f8a2f 109px, #317e31 110px
    ), repeating-linear-gradient(
      to bottom, transparent 0, transparent 109px, rgba(0,0,0,0.15) 110px
    );
    border: 4px solid #0b2b0b;
    box-shadow: 0 0 20px rgba(0,0,0,0.6) inset;
    overflow: hidden;
  }

  .cell {
    position: absolute;
    width: 110px;
    height: 110px;
    border: 1px solid rgba(255,255,255,0.05);
    cursor: pointer;
  }

  .plant {
    position: absolute;
    width: 90px;
    height: 90px;
    left: 10px;
    top: 10px;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 700;
    text-shadow: 0 0 5px #000;
  }

  .peashooter {
    background: radial-gradient(circle at 40% 30%, #6eff6e, #267e26);
    border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
    position: relative;
  }
  .peashooter::after {
    content: "";
    position: absolute;
    right: -12px;
    top: 35%;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle,#9aff9a,#3bb63b);
    border-radius: 50%;
  }

  .sunflower {
    background: radial-gradient(circle at 30% 30%, #fff07c, #d48a1a);
    border-radius: 50%;
    box-shadow: 0 0 10px #ffec84;
  }
  .wallnut {
    background: radial-gradient(circle at 30% 30%, #b08a58, #614322);
    border-radius: 20px;
  }

  .zombie {
    position: absolute;
    width: 90px;
    height: 100px;
    z-index: 3; /* ensure visible above plants */
    background: linear-gradient(180deg,#88c172,#4a7c42);
    border: 2px solid #243b23;
    border-radius: 10px;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    font-size: 40px;
  }

  .zombie span {
    font-size: 40px;
  }

  #overlay-message {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }

  #overlay-message.visible {
    opacity: 1;
    pointer-events: all;
  }

  #overlay-box {
    background: rgba(0,0,0,0.8);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    border: 1px solid #00ff90;
  }

  @media(max-width:1000px) {
    #board {
      transform: scale(0.7);
      transform-origin: top center;
    }
  }
</style>
</head>
<body>
<div id="game-container">
  <h1>Plants vs Zombies ‚Äî HD Edition</h1>
  <div id="top-bar">
    <div id="sun-counter">‚òÄ Sun: <span id="sun-amount">150</span></div>
    <div id="status-text">Select a seed, then click a tile.</div>
    <button id="start-button">Start Wave</button>
  </div>
  <div id="seed-bank">
    <div class="seed-card selected" data-plant="peashooter">Peashooter<br>Cost:100</div>
    <div class="seed-card" data-plant="sunflower">Sunflower<br>Cost:50</div>
    <div class="seed-card" data-plant="wallnut">Wall-nut<br>Cost:50</div>
  </div>
  <div id="board"></div>
  <div id="overlay-message">
    <div id="overlay-box">
      <h2 id="overlay-title">Game Over</h2>
      <p id="overlay-desc">The zombies ate your brains...</p>
      <button id="restart-button">Restart</button>
    </div>
  </div>
</div>
<script>
const ROWS=5,COLS=9,CELL=110;
const board=document.getElementById("board");
const sunEl=document.getElementById("sun-amount");
const statusEl=document.getElementById("status-text");
const overlay=document.getElementById("overlay-message");
const overlayTitle=document.getElementById("overlay-title");
const overlayDesc=document.getElementById("overlay-desc");
const restartButton=document.getElementById("restart-button");
let sun=150;
let running=false,wave=false,gameOver=false;
let plants=[],zombies=[],last=0,timer=0,nextSpawn=4;

const PLANTS={
  peashooter:{cost:100,reload:1.2,dmg:25,hp:100},
  sunflower:{cost:50,interval:6,hp:80},
  wallnut:{cost:50,hp:300}
};
const ZOMBIE={hp:100,step:1.4,bite:20};

function makeCells(){
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const d=document.createElement("div");
      d.className="cell";
      d.style.left=c*CELL+"px";
      d.style.top=r*CELL+"px";
      d.dataset.row=r;d.dataset.col=c;
      d.onclick=e=>plantSeed(r,c);
      board.appendChild(d);
    }
  }
}
makeCells();

function updateSun(){sunEl.textContent=sun;}
updateSun();

let current="peashooter";
document.querySelectorAll(".seed-card").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".seed-card").forEach(x=>x.classList.remove("selected"));
    b.classList.add("selected");
    current=b.dataset.plant;
    statusEl.textContent="Selected "+current;
  };
});

function plantSeed(r,c){
  if(plants.some(p=>p.r==r&&p.c==c))return;
  const conf=PLANTS[current];
  if(sun<conf.cost){statusEl.textContent="Not enough sun!";return;}
  sun-=conf.cost;updateSun();
  const el=document.createElement("div");
  el.classList.add("plant",current);
  board.appendChild(el);
  el.style.left=c*CELL+10+"px";
  el.style.top=r*CELL+10+"px";
  plants.push({r,c,type:current,hp:conf.hp,reload:0,timer:conf.interval||0,el});
}

function spawnZombie(){
  const row=Math.floor(Math.random()*ROWS);
  const el=document.createElement("div");
  el.className="zombie";
  el.innerHTML="<span>üßü‚Äç‚ôÇÔ∏è</span>";
  board.appendChild(el);
  zombies.push({r:row,c:COLS,hp:ZOMBIE.hp,t:0,el});
  updateZombie(el,row,COLS);
}
function updateZombie(el,r,c){
  el.style.left=c*CELL+20+"px";
  el.style.top=r*CELL+5+"px";
}

function removeZombie(z){
  if(z.el)z.el.remove();
  zombies=zombies.filter(x=>x!==z);
}
function removePlant(p){
  if(p.el)p.el.remove();
  plants=plants.filter(x=>x!==p);
}

function gameLoop(t){
  if(!running)return;
  const dt=(t-last)/1000;last=t;
  if(!gameOver){
    updatePlants(dt);
    updateZombies(dt);
    handleSpawn(dt);
  }
  requestAnimationFrame(gameLoop);
}

function updatePlants(dt){
  for(let p of plants){
    const conf=PLANTS[p.type];
    if(p.type=="sunflower"){
      p.timer-=dt;
      if(p.timer<=0){sun+=25;updateSun();p.timer=conf.interval;}
    }
    if(p.type=="peashooter"){
      p.reload-=dt;
      const z=zombies.find(z=>z.r==p.r&&z.c==p.c);
      if(z&&p.reload<=0){
        z.hp-=conf.dmg;
        p.reload=conf.reload;
        p.el.style.transform="scale(1.1)";
        setTimeout(()=>p.el&&(p.el.style.transform="scale(1)"),150);
        if(z.hp<=0)removeZombie(z);
      }
    }
    if(p.hp<=0)removePlant(p);
  }
}

function updateZombies(dt){
  for(let z of zombies){
    const p=plants.find(p=>p.r==z.r&&p.c==z.c);
    if(p){p.hp-=ZOMBIE.bite*dt;continue;}
    z.t-=dt;
    if(z.t<=0){z.c--;z.t=ZOMBIE.step;}
    if(z.c<0){endGame(false);return;}
    updateZombie(z.el,z.r,z.c);
  }
}

function handleSpawn(dt){
  if(!wave)return;
  timer+=dt;
  if(timer>nextSpawn){
    spawnZombie();
    nextSpawn=3+Math.random()*3;
    timer=0;
  }
}

function endGame(win){
  gameOver=true;running=false;
  overlay.classList.add("visible");
  overlayTitle.textContent=win?"You Survived!":"Game Over!";
  overlayDesc.textContent=win?"You held the line!":"The zombies ate your brains!";
}

document.getElementById("start-button").onclick=()=>{
  if(wave)return;
  wave=true;running=true;
  requestAnimationFrame(gameLoop);
  statusEl.textContent="Wave started!";
};

restartButton.onclick=()=>{
  board.innerHTML="";
  plants=[];zombies=[];
  sun=150;gameOver=false;wave=false;running=true;
  updateSun();makeCells();
  requestAnimationFrame(gameLoop);
};
</script>
</body>
</html>